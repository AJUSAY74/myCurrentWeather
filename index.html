<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Current Weather</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .weather-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .fade-in {
            animation: fadeInAnimation 0.8s ease-in-out forwards;
        }
        @keyframes fadeInAnimation {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-cyan-400 to-blue-600 min-h-screen flex items-center justify-center p-4">

    <!-- Weather Card Container -->
    <div id="weather-container" class="w-full max-w-md mx-auto">
        <div class="weather-card rounded-2xl shadow-lg p-6 md:p-8 text-white">

            <!-- Loading State -->
            <div id="loader" class="text-center">
                <svg class="animate-spin h-8 w-8 text-white mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-lg font-medium">Fetching your location...</p>
                <p class="text-sm opacity-80">Please allow location access</p>
            </div>
            
            <!-- Error Message -->
            <!-- <div id="error-message" class="hidden text-center">
                 <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-yellow-300 mb-2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                <p class="text-lg font-semibold">Could not get location</p>
                <p class="text-sm opacity-80" id="error-details">Please enable location services and refresh the page.</p>
            </div>
            -->
            <!-- Weather Content (Initially Hidden) -->
            <div id="weather-content" class="hidden">
                <!-- Header: Location and Time -->
                <div class="text-center mb-6">
                    <h2 id="location" class="text-2xl md:text-3xl font-bold tracking-wide">--</h2>
                    <p id="date-time" class="text-sm opacity-80">--</p>
                </div>

                <!-- Main Display: Icon and Temperature -->
                <div class="flex flex-col md:flex-row items-center justify-around text-center md:text-left mb-6">
                    <div id="weather-icon" class="w-24 h-24 md:w-32 md:h-32 mb-4 md:mb-0">
                        <!-- SVG Icon will be inserted here -->
                    </div>
                    <div>
                        <p id="temperature" class="text-6xl md:text-7xl font-bold">--°</p>
                        <p id="description" class="text-lg capitalize opacity-90">--</p>
                    </div>
                </div>

                <!-- Details Section -->
                <div class="grid grid-cols-3 gap-4 text-center border-t border-white/20 pt-6">
                    <div>
                        <p class="text-sm opacity-80">Humidity</p>
                        <p id="humidity" class="font-semibold text-lg">--%</p>
                    </div>
                    <div>
                        <p class="text-sm opacity-80">Wind Speed</p>
                        <p id="wind-speed" class="font-semibold text-lg">-- mph</p>
                    </div>
                    <div>
                        <p class="text-sm opacity-80">Feels Like</p>
                        <p id="feels-like" class="font-semibold text-lg">--°</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const weatherContent = document.getElementById('weather-content');
            const errorMessage = document.getElementById('error-message');
            const errorDetails = document.getElementById('error-details');

            // --- Weather Icon Mapping ---
            // A simple mapping of weather conditions to SVG icons.
            const weatherIcons = {
                'Clear': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>`,
                'Clouds': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg>`,
                'Rain': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#B0E0E6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 17a5 5 0 0 0-10 0M16 13V5a4 4 0 1 0-8 0v8"></path><line x1="8" y1="16" x2="8" y2="16"></line><line x1="12" y1="18" x2="12" y2="18"></line><line x1="16" y1="16" x2="16" y2="16"></line></svg>`,
                'Drizzle': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#B0E0E6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 19v2M8 13v2M16 19v2M16 13v2M12 21v2M12 15v2M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></svg>`,
                'Thunderstorm': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16.92A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path><polyline points="13 11 9 17 15 17 11 23"></polyline></svg>`,
                'Snow': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="15" x2="8.01" y2="15"></line><line x1="12" y1="17" x2="12.01" y2="17"></line><line x1="16" y1="15" x2="16.01" y2="15"></line></svg>`,
                'Mist': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 17a5 5 0 0 0-10 0M16 13V5a4 4 0 1 0-8 0v8"></path><line x1="3" y1="18" x2="21" y2="18"></line><line x1="3" y1="22" x2="21" y2="22"></line></svg>`,
                'Default': `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg>`,
            };
            
            // --- Geolocation Logic ---
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(onSuccess, onError);
            } else {
                showError("Geolocation is not supported by this browser.");
            }
            
            // --- Success Callback ---
            function onSuccess(position) {
                // In a real app, you'd fetch from a weather API using these coordinates.
                // For this example, we'll use mock data since we don't have a public API key.
                const { latitude, longitude } = position.coords;
                
                // Mock weather data for Los Angeles, based on the prompt context
                const mockWeatherData = {
                    name: "Los Angeles",
                    sys: { country: "US" },
                    main: { temp: 22.2, feels_like: 21.8, humidity: 55 },
                    weather: [{ main: "Clear", description: "Clear Sky" }],
                    wind: { speed: 4.5 } // meters/sec
                };

                displayWeatherData(mockWeatherData);
            }

            // --- Error Callback ---
            function onError(error) {
                let message;
                switch(error.code) {
                    case error.PERMISSION_DENIED:
                        message = "You denied the request for Geolocation.";
                        break;
                    case error.POSITION_UNAVAILABLE:
                        message = "Location information is unavailable.";
                        break;
                    case error.TIMEOUT:
                        message = "The request to get user location timed out.";
                        break;
                    case error.UNKNOWN_ERROR:
                        message = "An unknown error occurred.";
                        break;
                }
                showError(message);
            }

            // --- Display Weather Data ---
            function displayWeatherData(data) {
                // Destructure data for easier access
                const { name, sys, main, weather, wind } = data;
                
                // Convert temperature from Celsius to Fahrenheit and wind speed
                const tempF = Math.round(main.temp * 9/5 + 32);
                const feelsLikeF = Math.round(main.feels_like * 9/5 + 32);
                const windMph = (wind.speed * 2.237).toFixed(1);

                // Get current date and time
                const now = new Date();
                const formattedDate = now.toLocaleDateString('en-US', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
                 const formattedTime = now.toLocaleTimeString('en-US', {
                    hour: '2-digit', minute: '2-digit', hour12: true
                });

                // Update DOM elements
                document.getElementById('location').textContent = `${name}, ${sys.country}`;
                document.getElementById('date-time').textContent = `${formattedDate} at ${formattedTime}`;
                document.getElementById('temperature').textContent = `${tempF}°`;
                document.getElementById('description').textContent = weather[0].description;
                document.getElementById('humidity').textContent = `${main.humidity}%`;
                document.getElementById('wind-speed').textContent = `${windMph} mph`;
                document.getElementById('feels-like').textContent = `${feelsLikeF}°`;
                
                const weatherCondition = weather[0].main;
                document.getElementById('weather-icon').innerHTML = weatherIcons[weatherCondition] || weatherIcons['Default'];
                
                // Show content
                loader.classList.add('hidden');
                errorMessage.classList.add('hidden');
                weatherContent.classList.remove('hidden');
                weatherContent.classList.add('fade-in');
            }
            
            function showError(message) {
                errorDetails.textContent = message;
                loader.classList.add('hidden');
                weatherContent.classList.add('hidden');
                errorMessage.classList.remove('hidden');
                errorMessage.classList.add('fade-in');
            }
        });
    </script>
</body>
</html>
